{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///time-loop.min.js","webpack:///webpack/bootstrap cc7924969b8fa722c19c","webpack:///./src/index.js","webpack:///./src/timer.js","webpack:///./src/tools.js"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","_classCallCheck","instance","Constructor","TypeError","Object","defineProperty","value","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","_timer","_timer2","_tools","currentTime","fpsCurrentTime","ev","prom","TimeLoop","_this","timers","elapsedTime","lastTime","paused","started","sortable","autoSort","defaultNamespace","fps","fpsLastTime","frameCount","proxyStep","step","bind","document","hidden","addEventListener","pause","start","get","Date","now","_this2","sort","time","map","e","ended","update","window","requestAnimationFrame","orderByPriority","nb","Error","Array","cb","options","ctx","getFromPool","namespace","callback","context","push","_namespace","action","match","checkNamespace","resume","reset","end","_this3","arguments","undefined","Promise","resolve","createTimer","type","Timer","settings","extendOptions","defaultOptions","priority","_options","ms","escapeRegExp","str","replace","timer","reg","RegExp","test","ev1","ev2","defaults","extended","hasOwnProperty","j"],"mappings":"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","file":"time-loop.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"TimeLoop\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"TimeLoop\"] = factory();\n\telse\n\t\troot[\"TimeLoop\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"TimeLoop\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"TimeLoop\"] = factory();\n\telse\n\t\troot[\"TimeLoop\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * @fileOverview Javascript time-based events handler\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * @author <a href=\"mailto:perrine.boissieres@gmail.com\">Perrine Boissières</a>\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * @version 2.0.0\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */\n\t\n\tvar _timer = __webpack_require__(1);\n\t\n\tvar _timer2 = _interopRequireDefault(_timer);\n\t\n\tvar _tools = __webpack_require__(2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar currentTime = void 0;\n\tvar fpsCurrentTime = void 0;\n\tvar ev = void 0;\n\tvar i = void 0;\n\tvar prom = void 0;\n\t\n\t/**\n\t * @class\n\t */\n\t\n\tvar TimeLoop = function () {\n\t  _createClass(TimeLoop, [{\n\t    key: 'time',\n\t\n\t    /** @type Number */\n\t    get: function get() {\n\t      return Date.now();\n\t    }\n\t\n\t    /**\n\t     * @constructor\n\t     */\n\t\n\t  }]);\n\t\n\t  function TimeLoop() {\n\t    var _this = this;\n\t\n\t    _classCallCheck(this, TimeLoop);\n\t\n\t    /** @type Array */\n\t    this.timers = [];\n\t\n\t    /** @type Number */\n\t    this.elapsedTime = 0;\n\t\n\t    /** @type Number */\n\t    this.lastTime = 0;\n\t\n\t    /** @type boolean */\n\t    this.paused = true;\n\t\n\t    /** @type boolean */\n\t    this.started = false;\n\t\n\t    /** @type boolean */\n\t    this.sortable = false;\n\t\n\t    /** @type boolean */\n\t    this.autoSort = true;\n\t\n\t    /** @type String */\n\t    this.defaultNamespace = 'all';\n\t\n\t    /** @type Number */\n\t    this.fps = 0;\n\t\n\t    /** @type Number */\n\t    this.fpsLastTime = 0;\n\t\n\t    /** @type Number */\n\t    this.frameCount = 0;\n\t\n\t    /** @type function */\n\t    this.proxyStep = this.step.bind(this);\n\t\n\t    // If the browser supports the visibilityChange API, we bind the event\n\t    // to stop and re-start the loop automatically\n\t    if (typeof document.hidden !== 'undefined') {\n\t      document.addEventListener('visibilitychange', function () {\n\t        if (document.hidden) _this.pause();else _this.start();\n\t      }, false);\n\t    }\n\t  }\n\t\n\t  /**\n\t   * @method step\n\t   * Updates all registered timers\n\t   */\n\t\n\t\n\t  _createClass(TimeLoop, [{\n\t    key: 'step',\n\t    value: function step() {\n\t      var _this2 = this;\n\t\n\t      if (this.paused) return;\n\t\n\t      if (this.autoSort && this.sortable) {\n\t        this.sort();\n\t        this.sortable = false;\n\t      }\n\t\n\t      currentTime = fpsCurrentTime = this.time;\n\t      this.elapsedTime = currentTime - this.lastTime;\n\t      this.lastTime = currentTime;\n\t      this.frameCount++;\n\t\n\t      if (fpsCurrentTime - 1000 > this.fpsLastTime) {\n\t        this.fps = this.frameCount;\n\t        this.frameCount = 0;\n\t        this.fpsLastTime = fpsCurrentTime;\n\t      }\n\t\n\t      this.timers.map(function (e) {\n\t        if (!e.paused && !e.ended) e.update(_this2.elapsedTime);\n\t        return e;\n\t      });\n\t\n\t      window.requestAnimationFrame(this.proxyStep);\n\t    }\n\t\n\t    /**\n\t     * @method start\n\t     * Starts the loop if not already started\n\t     */\n\t\n\t  }, {\n\t    key: 'start',\n\t    value: function start() {\n\t      if (!this.paused) return; // If already started, we quit\n\t\n\t      this.lastTime = this.time;\n\t      this.fpsLastTime = this.time;\n\t      this.elapsedTime = 0;\n\t      this.paused = false;\n\t      this.frameCount = 0;\n\t\n\t      if (!this.started) {\n\t        this.started = true;\n\t        window.requestAnimationFrame(this.proxyStep);\n\t      }\n\t    }\n\t\n\t    /**\n\t     * @method pause\n\t     * Pauses the loop\n\t     * @return {TimeLoop} chainable\n\t     */\n\t\n\t  }, {\n\t    key: 'pause',\n\t    value: function pause() {\n\t      this.paused = true;\n\t      return this;\n\t    }\n\t\n\t    /**\n\t     * @method resume\n\t     * Alias for start method\n\t     * @return {TimeLoop} chainable\n\t     */\n\t\n\t  }, {\n\t    key: 'resume',\n\t    value: function resume() {\n\t      this.start();\n\t      return this;\n\t    }\n\t\n\t    /**\n\t     * @method sort\n\t     * Sorts timers by priority\n\t     * @return {TimeLoop} chainable\n\t     */\n\t\n\t  }, {\n\t    key: 'sort',\n\t    value: function sort() {\n\t      this.timers.sort(_tools.orderByPriority);\n\t      return this;\n\t    }\n\t\n\t    /**\n\t     * @method createPool\n\t     * Creates a given number of empty timers\n\t     * @param {Number} nb The number of timers to create\n\t     * @return {TimeLoop} chainable\n\t     */\n\t\n\t  }, {\n\t    key: 'createPool',\n\t    value: function createPool(nb) {\n\t      if (this.timers.length) {\n\t        throw new Error('Timers have already been created, cannot pre-allocate.');\n\t      }\n\t\n\t      this.timers = new Array(nb);\n\t\n\t      for (i = 0; i < nb; i++) {\n\t        ev = new _timer2.default();\n\t        ev.ended = true;\n\t        this.timers[i] = ev;\n\t      }\n\t\n\t      return this;\n\t    }\n\t\n\t    /**\n\t     * @method createTimer\n\t     * Creates a new timer, from pool if available\n\t     * @param {function} cb Callback function to execute\n\t     * @param {Object} options Parameters\n\t     * @param {Object} ctx Context for callback execution\n\t     * @return {Timer} Newly created timer\n\t     */\n\t\n\t  }, {\n\t    key: 'createTimer',\n\t    value: function createTimer(cb, options, ctx) {\n\t      ev = this.getFromPool();\n\t\n\t      if (options.namespace) options.namespace = this.defaultNamespace + '.' + options.namespace;else options.namespace = this.defaultNamespace;\n\t\n\t      if (ev) {\n\t        ev.callback = cb;\n\t        ev.context = ctx || window;\n\t        ev.ended = false;\n\t        ev.paused = false;\n\t        return ev.options(options);\n\t      }\n\t\n\t      ev = new _timer2.default(cb, options, ctx);\n\t      this.timers.push(ev);\n\t\n\t      this.sortable = true;\n\t\n\t      return ev;\n\t    }\n\t\n\t    /**\n\t     * @method getFromPool\n\t     * Retrieves an ended event from the pool, returns false if none is found\n\t     * @return {Timer|bool}\n\t     */\n\t\n\t  }, {\n\t    key: 'getFromPool',\n\t    value: function getFromPool() {\n\t      for (i = 0; i < this.timers.length; i++) {\n\t        ev = this.timers[i];\n\t        if (ev.ended) return ev;\n\t      }\n\t\n\t      return false;\n\t    }\n\t\n\t    /**\n\t     * @method namespace\n\t     * Retrieves timers under given namespace, can execute an action on all of them\n\t     * @param {String} namespace Namespace\n\t     * @param {String} action Optional action name (start, pause, end)\n\t     * @return {Array} Array of timers\n\t     */\n\t\n\t  }, {\n\t    key: 'namespace',\n\t    value: function namespace(_namespace, action) {\n\t      var match = [];\n\t\n\t      this.timers.map(function (e) {\n\t        if (!e.ended && (0, _tools.checkNamespace)(e, _namespace)) {\n\t          if (action && action === 'resume') e.resume();else if (action && action === 'pause') e.pause();else if (action && action === 'reset') e.reset();else if (action && action === 'end') e.end();\n\t\n\t          match.push(e);\n\t        }\n\t        return e;\n\t      });\n\t\n\t      return match;\n\t    }\n\t\n\t    /**\n\t     * @function wait\n\t     * Creates a timeout and returns a promise\n\t     * @param {Number} time=0 The time to wait before resolving\n\t     * @return {Promise}\n\t     */\n\t\n\t  }, {\n\t    key: 'wait',\n\t    value: function wait() {\n\t      var _this3 = this;\n\t\n\t      var time = arguments.length <= 0 || arguments[0] === undefined ? 0 : arguments[0];\n\t\n\t      prom = new Promise(function (resolve) {\n\t        _this3.createTimer(function () {\n\t          return resolve();\n\t        }, {\n\t          type: 'timeout',\n\t          time: time\n\t        });\n\t      });\n\t\n\t      return prom;\n\t    }\n\t\n\t    /**\n\t     * @function repeat\n\t     * Creates an interval\n\t     * @param {function} callback The callback function\n\t     * @param {Number} time=0 The time to wait between calls\n\t     * @return {Timer}\n\t     */\n\t\n\t  }, {\n\t    key: 'repeat',\n\t    value: function repeat(callback) {\n\t      var time = arguments.length <= 1 || arguments[1] === undefined ? 0 : arguments[1];\n\t\n\t      return this.createTimer(callback, {\n\t        type: 'interval',\n\t        time: time\n\t      }, this);\n\t    }\n\t  }]);\n\t\n\t  return TimeLoop;\n\t}();\n\t\n\texports.default = TimeLoop;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _tools = __webpack_require__(2);\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\t/**\n\t * @class\n\t */\n\t\n\tvar Timer = function () {\n\t  _createClass(Timer, [{\n\t    key: 'defaultOptions',\n\t\n\t\n\t    /** @type Object */\n\t    get: function get() {\n\t      return {\n\t        type: 'timeout',\n\t        time: 0,\n\t        priority: 1,\n\t        namespace: ''\n\t      };\n\t    }\n\t\n\t    /**\n\t     * @constructor\n\t     * @param {function} cb The callback to be delayed or repeated\n\t     * @param {Object} options A list of options\n\t     * @param {Object} ctx The context of the callback's execution\n\t     */\n\t\n\t  }]);\n\t\n\t  function Timer(cb, options, ctx) {\n\t    _classCallCheck(this, Timer);\n\t\n\t    /** @type Object */\n\t    this.settings = (0, _tools.extendOptions)(this.defaultOptions, options);\n\t\n\t    /** @type boolean */\n\t    this.paused = false;\n\t\n\t    /** @type boolean */\n\t    this.ended = false;\n\t\n\t    /** @type function */\n\t    this.callback = cb || undefined;\n\t\n\t    /** @type Object */\n\t    this.context = ctx || window;\n\t\n\t    /** @type Number */\n\t    this.elapsedTime = 0;\n\t  }\n\t\n\t  /**\n\t   * @method options\n\t   * Changes the options of an existing Timer\n\t   * @param {Object} options A list of options\n\t   * @param {bool} reset=true false if you don't want to reset all current options\n\t   * @return {Timer} chainable\n\t   */\n\t\n\t\n\t  _createClass(Timer, [{\n\t    key: 'options',\n\t    value: function options(_options) {\n\t      var reset = arguments.length <= 1 || arguments[1] === undefined ? true : arguments[1];\n\t\n\t      if (!reset) this.settings = (0, _tools.extendOptions)(this.settings, _options);else this.settings = (0, _tools.extendOptions)(this.defaultOptions, _options);\n\t      return this;\n\t    }\n\t\n\t    /**\n\t     * @method update\n\t     * Adds the elapsed time since last call\n\t     * @param {Number} ms Number of ms passed\n\t     */\n\t\n\t  }, {\n\t    key: 'update',\n\t    value: function update(ms) {\n\t      if (this.paused || this.ended) return;\n\t\n\t      this.elapsedTime += ms;\n\t      if (this.elapsedTime >= this.settings.time) {\n\t        this.callback.call(this.context);\n\t        this.elapsedTime = 0;\n\t        if (this.settings.type === 'timeout') this.ended = true;\n\t      }\n\t    }\n\t\n\t    /**\n\t     * @method pause\n\t     * Pauses the event\n\t     * @return {Timer} chainable\n\t     */\n\t\n\t  }, {\n\t    key: 'pause',\n\t    value: function pause() {\n\t      this.paused = true;\n\t      return this;\n\t    }\n\t\n\t    /**\n\t     * @method resume\n\t     * Resumes the event\n\t     * @return {Timer} chainable\n\t     */\n\t\n\t  }, {\n\t    key: 'resume',\n\t    value: function resume() {\n\t      this.paused = false;\n\t      return this;\n\t    }\n\t\n\t    /**\n\t     * @method reset\n\t     * Resets internal elapsed time to 0\n\t     * @return {Timer} chainable\n\t     */\n\t\n\t  }, {\n\t    key: 'reset',\n\t    value: function reset() {\n\t      this.elapsedTime = 0;\n\t      return this;\n\t    }\n\t\n\t    /**\n\t     * @method end\n\t     * Stops the event\n\t     * @return {Timer} chainable\n\t     */\n\t\n\t  }, {\n\t    key: 'end',\n\t    value: function end() {\n\t      this.ended = true;\n\t      return this;\n\t    }\n\t  }]);\n\t\n\t  return Timer;\n\t}();\n\t\n\texports.default = Timer;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.escapeRegExp = escapeRegExp;\n\texports.checkNamespace = checkNamespace;\n\texports.orderByPriority = orderByPriority;\n\texports.extendOptions = extendOptions;\n\t/**\n\t * @function escapeRegExp\n\t * Escapes all RegExp special characters from a string\n\t * @param {String} str The string to escape\n\t * @return {String}\n\t */\n\tfunction escapeRegExp(str) {\n\t  return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&');\n\t}\n\t\n\t/**\n\t * @function checkNamespace\n\t * Returns true if the timer object is in given namespace\n\t * @param {Timer} timer\n\t * @param {String} namespace\n\t * @return {boolean}\n\t */\n\tfunction checkNamespace(timer, namespace) {\n\t  var reg = new RegExp('^' + escapeRegExp(namespace));\n\t\n\t  if (reg.test(timer.settings.namespace)) return true;\n\t\n\t  return false;\n\t}\n\t\n\t/**\n\t * @function orderByPriority\n\t * To pass to a sort method to order a list of timers by priority\n\t * @param {Timer} ev1\n\t * @param {Timer} ev2\n\t * @return {Number}\n\t */\n\tfunction orderByPriority(ev1, ev2) {\n\t  return ev2.settings.priority - ev1.settings.priority;\n\t}\n\t\n\t/**\n\t * @function extendOptions\n\t * Extends en object with another object\n\t * @param {Object} defaults Basic object to override\n\t * @param {Object} options Object that overrides the default one\n\t * @return {Object} The new extended object\n\t */\n\tfunction extendOptions(defaults, options) {\n\t  if (!options) return defaults;\n\t\n\t  var extended = {};\n\t\n\t  // eslint-disable-next-line\n\t  for (var i in defaults) {\n\t    if ({}.hasOwnProperty.call(defaults, i)) {\n\t      extended[i] = defaults[i];\n\t    }\n\t  }\n\t  // eslint-disable-next-line\n\t  for (var j in options) {\n\t    if ({}.hasOwnProperty.call(options, j)) {\n\t      extended[j] = options[j];\n\t    }\n\t  }\n\t\n\t  return extended;\n\t}\n\n/***/ }\n/******/ ])\n});\n;\n\n\n/** WEBPACK FOOTER **\n ** time-loop.min.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap cc7924969b8fa722c19c\n **/","/**\n * @fileOverview Javascript time-based events handler\n * @author <a href=\"mailto:perrine.boissieres@gmail.com\">Perrine Boissières</a>\n * @version 2.0.0\n */\n\nimport Timer from './timer';\nimport { checkNamespace, orderByPriority } from './tools';\n\nlet currentTime;\nlet fpsCurrentTime;\nlet ev;\nlet i;\nlet prom;\n\n/**\n * @class\n */\nexport default class TimeLoop {\n  /** @type Number */\n  get time() { return Date.now(); }\n\n  /**\n   * @constructor\n   */\n  constructor() {\n    /** @type Array */\n    this.timers = [];\n\n    /** @type Number */\n    this.elapsedTime = 0;\n\n    /** @type Number */\n    this.lastTime = 0;\n\n    /** @type boolean */\n    this.paused = true;\n\n    /** @type boolean */\n    this.started = false;\n\n    /** @type boolean */\n    this.sortable = false;\n\n    /** @type boolean */\n    this.autoSort = true;\n\n    /** @type String */\n    this.defaultNamespace = 'all';\n\n    /** @type Number */\n    this.fps = 0;\n\n    /** @type Number */\n    this.fpsLastTime = 0;\n\n    /** @type Number */\n    this.frameCount = 0;\n\n    /** @type function */\n    this.proxyStep = this.step.bind(this);\n\n    // If the browser supports the visibilityChange API, we bind the event\n    // to stop and re-start the loop automatically\n    if (typeof document.hidden !== 'undefined') {\n      document.addEventListener('visibilitychange', () => {\n        if (document.hidden) this.pause();\n        else this.start();\n      }, false);\n    }\n  }\n\n  /**\n   * @method step\n   * Updates all registered timers\n   */\n  step() {\n    if (this.paused) return;\n\n    if (this.autoSort && this.sortable) {\n      this.sort();\n      this.sortable = false;\n    }\n\n    currentTime = fpsCurrentTime = this.time;\n    this.elapsedTime = currentTime - this.lastTime;\n    this.lastTime = currentTime;\n    this.frameCount++;\n\n    if (fpsCurrentTime - 1000 > this.fpsLastTime) {\n      this.fps = this.frameCount;\n      this.frameCount = 0;\n      this.fpsLastTime = fpsCurrentTime;\n    }\n\n    this.timers.map((e) => {\n      if (!e.paused && !e.ended) e.update(this.elapsedTime);\n      return e;\n    });\n\n    window.requestAnimationFrame(this.proxyStep);\n  }\n\n  /**\n   * @method start\n   * Starts the loop if not already started\n   */\n  start() {\n    if (!this.paused) return; // If already started, we quit\n\n    this.lastTime = this.time;\n    this.fpsLastTime = this.time;\n    this.elapsedTime = 0;\n    this.paused = false;\n    this.frameCount = 0;\n\n    if (!this.started) {\n      this.started = true;\n      window.requestAnimationFrame(this.proxyStep);\n    }\n  }\n\n  /**\n   * @method pause\n   * Pauses the loop\n   * @return {TimeLoop} chainable\n   */\n  pause() {\n    this.paused = true;\n    return this;\n  }\n\n  /**\n   * @method resume\n   * Alias for start method\n   * @return {TimeLoop} chainable\n   */\n  resume() {\n    this.start();\n    return this;\n  }\n\n  /**\n   * @method sort\n   * Sorts timers by priority\n   * @return {TimeLoop} chainable\n   */\n  sort() {\n    this.timers.sort(orderByPriority);\n    return this;\n  }\n\n  /**\n   * @method createPool\n   * Creates a given number of empty timers\n   * @param {Number} nb The number of timers to create\n   * @return {TimeLoop} chainable\n   */\n  createPool(nb) {\n    if (this.timers.length) {\n      throw new Error('Timers have already been created, cannot pre-allocate.');\n    }\n\n    this.timers = new Array(nb);\n\n    for (i = 0; i < nb; i++) {\n      ev = new Timer();\n      ev.ended = true;\n      this.timers[i] = ev;\n    }\n\n    return this;\n  }\n\n  /**\n   * @method createTimer\n   * Creates a new timer, from pool if available\n   * @param {function} cb Callback function to execute\n   * @param {Object} options Parameters\n   * @param {Object} ctx Context for callback execution\n   * @return {Timer} Newly created timer\n   */\n  createTimer(cb, options, ctx) {\n    ev = this.getFromPool();\n\n    if (options.namespace) options.namespace = `${this.defaultNamespace}.${options.namespace}`;\n    else options.namespace = this.defaultNamespace;\n\n    if (ev) {\n      ev.callback = cb;\n      ev.context = ctx || window;\n      ev.ended = false;\n      ev.paused = false;\n      return ev.options(options);\n    }\n\n    ev = new Timer(cb, options, ctx);\n    this.timers.push(ev);\n\n    this.sortable = true;\n\n    return ev;\n  }\n\n  /**\n   * @method getFromPool\n   * Retrieves an ended event from the pool, returns false if none is found\n   * @return {Timer|bool}\n   */\n  getFromPool() {\n    for (i = 0; i < this.timers.length; i++) {\n      ev = this.timers[i];\n      if (ev.ended) return ev;\n    }\n\n    return false;\n  }\n\n  /**\n   * @method namespace\n   * Retrieves timers under given namespace, can execute an action on all of them\n   * @param {String} namespace Namespace\n   * @param {String} action Optional action name (start, pause, end)\n   * @return {Array} Array of timers\n   */\n  namespace(namespace, action) {\n    const match = [];\n\n    this.timers.map((e) => {\n      if (!e.ended && checkNamespace(e, namespace)) {\n        if (action && action === 'resume') e.resume();\n        else if (action && action === 'pause') e.pause();\n        else if (action && action === 'reset') e.reset();\n        else if (action && action === 'end') e.end();\n\n        match.push(e);\n      }\n      return e;\n    });\n\n    return match;\n  }\n\n  /**\n   * @function wait\n   * Creates a timeout and returns a promise\n   * @param {Number} time=0 The time to wait before resolving\n   * @return {Promise}\n   */\n  wait(time = 0) {\n    prom = new Promise((resolve) => {\n      this.createTimer(() => resolve(), {\n        type: 'timeout',\n        time,\n      });\n    });\n\n    return prom;\n  }\n\n  /**\n   * @function repeat\n   * Creates an interval\n   * @param {function} callback The callback function\n   * @param {Number} time=0 The time to wait between calls\n   * @return {Timer}\n   */\n  repeat(callback, time = 0) {\n    return this.createTimer(callback, {\n      type: 'interval',\n      time,\n    }, this);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","import { extendOptions } from './tools';\n\n/**\n * @class\n */\nexport default class Timer {\n\n  /** @type Object */\n  get defaultOptions() {\n    return {\n      type: 'timeout',\n      time: 0,\n      priority: 1,\n      namespace: '',\n    };\n  }\n\n  /**\n   * @constructor\n   * @param {function} cb The callback to be delayed or repeated\n   * @param {Object} options A list of options\n   * @param {Object} ctx The context of the callback's execution\n   */\n  constructor(cb, options, ctx) {\n    /** @type Object */\n    this.settings = extendOptions(this.defaultOptions, options);\n\n    /** @type boolean */\n    this.paused = false;\n\n    /** @type boolean */\n    this.ended = false;\n\n    /** @type function */\n    this.callback = cb || undefined;\n\n    /** @type Object */\n    this.context = ctx || window;\n\n    /** @type Number */\n    this.elapsedTime = 0;\n  }\n\n  /**\n   * @method options\n   * Changes the options of an existing Timer\n   * @param {Object} options A list of options\n   * @param {bool} reset=true false if you don't want to reset all current options\n   * @return {Timer} chainable\n   */\n  options(options, reset = true) {\n    if (!reset) this.settings = extendOptions(this.settings, options);\n    else this.settings = extendOptions(this.defaultOptions, options);\n    return this;\n  }\n\n  /**\n   * @method update\n   * Adds the elapsed time since last call\n   * @param {Number} ms Number of ms passed\n   */\n  update(ms) {\n    if (this.paused || this.ended) return;\n\n    this.elapsedTime += ms;\n    if (this.elapsedTime >= this.settings.time) {\n      this.callback.call(this.context);\n      this.elapsedTime = 0;\n      if (this.settings.type === 'timeout') this.ended = true;\n    }\n  }\n\n  /**\n   * @method pause\n   * Pauses the event\n   * @return {Timer} chainable\n   */\n  pause() {\n    this.paused = true;\n    return this;\n  }\n\n  /**\n   * @method resume\n   * Resumes the event\n   * @return {Timer} chainable\n   */\n  resume() {\n    this.paused = false;\n    return this;\n  }\n\n  /**\n   * @method reset\n   * Resets internal elapsed time to 0\n   * @return {Timer} chainable\n   */\n  reset() {\n    this.elapsedTime = 0;\n    return this;\n  }\n\n  /**\n   * @method end\n   * Stops the event\n   * @return {Timer} chainable\n   */\n  end() {\n    this.ended = true;\n    return this;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/timer.js\n **/","/**\n * @function escapeRegExp\n * Escapes all RegExp special characters from a string\n * @param {String} str The string to escape\n * @return {String}\n */\nexport function escapeRegExp(str) {\n  return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&');\n}\n\n/**\n * @function checkNamespace\n * Returns true if the timer object is in given namespace\n * @param {Timer} timer\n * @param {String} namespace\n * @return {boolean}\n */\nexport function checkNamespace(timer, namespace) {\n  const reg = new RegExp(`^${escapeRegExp(namespace)}`);\n\n  if (reg.test(timer.settings.namespace)) return true;\n\n  return false;\n}\n\n/**\n * @function orderByPriority\n * To pass to a sort method to order a list of timers by priority\n * @param {Timer} ev1\n * @param {Timer} ev2\n * @return {Number}\n */\nexport function orderByPriority(ev1, ev2) {\n  return ev2.settings.priority - ev1.settings.priority;\n}\n\n/**\n * @function extendOptions\n * Extends en object with another object\n * @param {Object} defaults Basic object to override\n * @param {Object} options Object that overrides the default one\n * @return {Object} The new extended object\n */\nexport function extendOptions(defaults, options) {\n  if (!options) return defaults;\n\n  const extended = {};\n\n  // eslint-disable-next-line\n  for (const i in defaults) {\n    if ({}.hasOwnProperty.call(defaults, i)) {\n      extended[i] = defaults[i];\n    }\n  }\n  // eslint-disable-next-line\n  for (const j in options) {\n    if ({}.hasOwnProperty.call(options, j)) {\n      extended[j] = options[j];\n    }\n  }\n\n  return extended;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/tools.js\n **/"],"sourceRoot":""}