!function(e){function t(s){if(i[s])return i[s].exports;var n=i[s]={exports:{},id:s,loaded:!1};return e[s].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var i={};return t.m=e,t.c=i,t.p="",t(0)}([function(e,t,i){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function a(e,t){return l=new RegExp("^"+r(t)),!!l.test(e.namespace)}function u(e,t){return t.options.priority-e.options.priority}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),h=i(1),d=s(h),l=void 0,p=void 0,c=void 0,f=void 0,m=void 0,v=void 0,y=function(){function e(){var t=this;n(this,e),this.timers=[],this.elapsedTime=0,this.lastTime=0,this.paused=!0,this.started=!1,this.sortable=!1,this.autoSort=!0,this.defaultNamespace="all",this.fps=0,this.fpsLastTime=0,this.frameCount=0,this.proxyStep=this.step.bind(this),"undefined"!=typeof document.hidden&&document.addEventListener("visibilitychange",function(){document.hidden?t.pause():t.start()},!1)}return o(e,[{key:"time",get:function(){return Date.now()}}]),o(e,[{key:"step",value:function(){var e=this;this.paused||(this.autoSort&&this.sortable&&(this.sort(),this.sortable=!1),p=c=this.time,this.elapsedTime=p-this.lastTime,this.lastTime=p,this.frameCount++,c-1e3>this.fpsLastTime&&(this.fps=this.frameCount,this.frameCount=0,this.fpsLastTime=c),this.timers.map(function(t){t.paused||t.ended||t.update(e.elapsedTime)}),window.requestAnimationFrame(this.proxyStep))}},{key:"start",value:function(){this.paused&&(this.lastTime=this.time,this.fpsLastTime=this.time,this.elapsedTime=0,this.paused=!1,this.frameCount=0,this.started||(this.started=!0,window.requestAnimationFrame(this.proxyStep)))}},{key:"pause",value:function(){return this.paused=!0,this}},{key:"resume",value:function(){return this.start(),this}},{key:"sort",value:function(){return this.timers.sort(u),this}},{key:"createPool",value:function(e){if(this.timers.length)throw new Error("Timers have already been created, cannot pre-allocate.");for(this.timers=new Array(e),m=0;m<e;m++)f=new d["default"],f.ended=!0,this.timers[m]=f;return this}},{key:"createTimer",value:function(e,t,i){return f=this.getFromPool(),t.namespace?t.namespace=this.defaultNamespace+"."+t.namespace:t.namespace=this.defaultNamespace,f?(f.callback=e,f.context=i||window,f.ended=!1,f.paused=!1,f.options(t)):(f=new d["default"](e,t,i),this.timers.push(f),this.sortable=!0,f)}},{key:"getFromPool",value:function(){for(m=0;m<this.timers.length;m++)if(f=this.timers[m],f.ended)return f;return!1}},{key:"namespace",value:function(e,t){var i=[];return this.timers.map(function(s){!s.ended&&a(s,e)&&(t&&"start"===t?s.paused=!1:t&&"pause"===t?s.paused=!0:t&&"end"===t&&(s.ended=!0),i.push(s))}),i}},{key:"wait",value:function(e){var t=this;return v=new Promise(function(i){t.createTimer(function(){return i()},{type:"timeout",time:e})})}},{key:"repeat",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?0:arguments[1];return this.createTimer({type:"interval",time:t},e,this)}}]),e}();t["default"]=y,e.exports=t["default"]},function(e,t){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),n=function(){function e(t,s,n){i(this,e),this.settings=extendOptions(this.defaultOptions,s),this.paused=!1,this.ended=!1,this.callback=t||void 0,this.context=n||window,this.elapsedTime=0}return s(e,[{key:"defaultOptions",get:function(){return{type:"timeout",time:0,priority:1,namespace:""}}}]),s(e,[{key:"options",value:function(e){var t=arguments.length<=1||void 0===arguments[1]||arguments[1];return t?this.settings=extendOptions(this.defaultOptions,e):this.settings=extendOptions(this.settings,e),this}},{key:"update",value:function(e){this.paused||this.ended||(this.elapsedTime+=e,this.elapsedTime>=this.settings.time&&(this.callback.call(this.context),this.elapsedTime=0,"timeout"===this.settings.type&&(this.ended=!0)))}},{key:"pause",value:function(){return this.paused=!0,this}},{key:"resume",value:function(){return this.paused=!1,this}},{key:"reset",value:function(){return this.elapsedTime=0,this}},{key:"end",value:function(){return this.ended=!0,this}}]),e}();t["default"]=n,e.exports=t["default"]}]);
//# sourceMappingURL=time-loop.min.js.map